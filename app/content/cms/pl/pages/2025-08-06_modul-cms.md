---
title: Moduł CMS
langs:
  en: 2025-08-06_cms-module
excerpt: Prace nad modułem CMS do RandomGena zakończone!
headerImage: mid-cms-module.jpg
category: blog
date: 2025-08-06
tags:
  - projekty
slots:
  aside:
    - type: static
      content: |
        ## Linki
        - [bardziej techniczny opis]{pl/randomgen}
        - [Repozytorium projektu](https://github.com/forsetius/randomgen-nest2)
lead: |
  Hurra! Pierwsza wersja modułu CMS ukończona! 
  
  Cóż to moduł CMS? Otóż jest to ta część aplikacji RandomGen, dzięki której czytasz tę stronę :)
---
**RandomGen** jest aplikacją wystawiającą generatory różnych rzeczy związanych z grami fabularnymi. W tej chwili jest dostępny jeden, drugi jest na wewnętrznych testach. Aby z nich skorzystać należy wysłać żądanie na dedykowany adres - dzięki temu generatory te mogą być używane w aplikacjach innych osób. Z drugiej jednak strony, dla zwykłego użytkownika użycie ich przez kliknięcie czegoś na stronie internetowej jest zdecydowanie łatwiejsze i bardziej pożądane. Stety, nie wszyscy są nerdami ;)

Potrzebowałem więc czegoś, co serwowałoby te strony internetowe. Te i inne, bo fajnie byłoby za jednym zamachem ogarnąć też np. własną wizytówkę internetową, pokazać galerię moich cudeniek, encyklopedię realiów Eclipse Phase RPG... Z drugiej strony, korzystne byłoby, gdyby tego CMS-a udało się wyodrębnić i użyć bez generatorów i innych specyficznych dla mnie rzeczy. Stąd zamknięcie funkcjonalności zarządzania treścią w module, który ma jasno ustalone zależności i może być w razie potrzeby wraz z nimi dodawany do przyszłych aplikacji. 

## Działanie
Moduł CMS opiera się na pobieraniu definicji stron z plików w formacie Markdown i renderowaniu ich z pomocą szablonów do statycznych plików HTML. No, nie do końca statyczne, ale o tym za chwilę. 

Na koniec rozruchu aplikacji (który dla ~300 stron trwa kilka sekund) dysponuje ona kilkoma zestawami stron i fragmentów HTML, które są serwowane statycznie. Cały proces realizuje zasadę "zapisz raz, czytaj wiele razy" co daje bardzo szybkie działanie aplikacji. Jest to model, w którym kosztowna operacja (generowanie strony) jest wykonywana raz, by później tanio i wielokrotnie korzystać z jej wyników już bez angażowania serwera aplikacji.

Ale nie wszystko da się obsłużyć statycznie, raz zdefiniowaną treścią. Artykuły, dokumentację, bloga - tak, ale takich rzeczy jak logowanie użytkownika, formularz kontaktowy, strony generatorów, jakieś bardziej wymyślne galerie - nie. Dlatego do statycznego HTML-a dodałem bibliotekę HTMX, która dodaje do standardowego kodu strony elementy umożliwiające różne rodzaje interakcji (np. pobieranie treści) z serwerami i modyfikowanie lokalnej strony (np. żeby wyświetlić te treści). Te interakcje mogą być naprawdę różne - od pobierania wyników pracy generatora RandomGen-a przez pobieranie prognozy pogody ze zdalnego serwera po wysyłanie poczty.

## Funkcjonalności
No dobrze, ale jakie ficzery ma to cudeńko? Otóż:

- generowanie stron za pomocą różnych szablonów stron
- definiowanie menu za pomocą pliku JSON lub YAML
- definiowanie treści stron za pomocą plików Markdowna
- wszystkie standardowe formatowania Markdowna plus te z GFM
- definiowania w tekście strony elastycznych bloków: treści statycznych, mediów i ich galerii, galerii podstron, danych pobieranych z innych endpointów i zewnętrznych API. Bloki te mogą być też dodawane do predefiniowanych w szablonach regionów strony
- wstawianie galerii stron. Ich źródłem mogą być kategorie (i podkategorie), tagi i strony określone ręcznie. Wyświetlane mogę być np. jako proste linki albo jako ilustrowane karty z podpisami
- wstawianie obrazków, wideo i ich galerii w obiekcie typu lightbox
- kategoryzowanie stron umożliwiające łatwe tworzenie galerii podstron. Kategorie są hierarchiczne - strona może należeć do kategorii, która należy do kategorii nadrzędnej itd. Kategorię można podzielić na podkategorie i każdą wyświetlać osobno
- tagowanie treści. Tagi nie są hierarchiczne ale każda strona może ich mieć wiele
- proste wyszukiwanie po tytule, zajawce, kategoriach i tagach
- uproszczone linkowanie do stron wewnętrznych
- wbudowany lightbox wyświetlający media i ich galerie
- RSS udostępniający dane o stronach z kategorii "blog"
- wsparcie dla wielojęzyczności

Jak wspomniałem, moduł CMS to jest ta rzecz, dzięki której widzisz tą stronę. Aby lepiej poznać jego możliwości możesz przejrzeć dokładniej pozostałe strony tego serwisu, w szczególności te o [Eclipse Phase RPG]{pl/eclipse-phase}, przykładowo: [Wenus]{pl/ep-atlas-wenus}.

